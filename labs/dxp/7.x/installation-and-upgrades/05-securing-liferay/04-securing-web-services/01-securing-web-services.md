# Securing Web Services

Liferay Portal provides four security layers for web services:

**IP permission layer:** The IP address from which a web service invocation request originates must be white-listed in the portal properties file. A web service invocation coming from a non-whitelisted IP address automatically fails.

**Service access policy layer:** Methods corresponding to a web service invocation request must be whitelisted by each service access policy that's in effect. You can use wildcards to reduce the number of service classes and methods that must be explicitly whitelisted.

**Authentication/verification layer (browser-only):** If a web service invocation request comes from a browser, the request must include an authentication token. This authentication token is the value of the `p_auth` URL parameter. The token is generated by @product@ and associated with your browser session. The `p_auth` parameter is automatically supplied when you invoke a @product@ web service via the JSON web services API page or via JavaScript using `Liferay.Service(...)`. If @product@ cannot associate the caller's authentication token with a User, the web service invocation request fails.

**User permission layer:** Properly implemented web services have permission checks. The user invoking a web service must have permission to invoke the service.

<!-- I would prefer to not include this image until we get design to do a pass on it because I find the visual to be more distracting than helpful in its current iteration. ![Figure 1: To get to a service, a request must pass through the door lock of user permissions, the padlock of the verification layer, the brick wall of service access policies, and finally the safe of predefined IP permissions.](./images/service-access-policies-security-layers.png)  -->

## Authorization

Liferay Portal contains several adjustable authorization layers:

- Remote IP and HTTPS transport check to limit access to Liferay Portal's Java servlets
- Extensible Access Control Policies layer to perform portal service-related authorization checks
- Extensible [Role-based permission framework](../user-and-system-management/roles-and-permissions.md) for Liferay assets (stored in the database or elsewhere)
- Portlet container security checks that control portlet access
- Remote IP check for remote API authentication methods
- [Service Access Policies](./03-setting-service-access-policies.md) to control access to remote APIs
- [Authentication Verifiers](./04-using-auth-verifiers.md) that verify provided credentials.
- [Cross-Origin Resource Sharing](./05-setting-up-cors.md) configuration can enable retrieving resources from trusted sources only.
